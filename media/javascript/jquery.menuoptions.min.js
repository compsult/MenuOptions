(function(c,b,a,e){var d={ClearBtn:false,SelectOnly:false,ID:"UnIqDrOpDoWnSeLeCt",Data:"",ColumnCount:1,UseValueForKey:false,PlaceHolder:"",Width:"",Sort:true,MenuOptionsType:"Select"};function f(h,g){this.element=h;this.options=c.extend({},d,g);this._defaults=d;this.total_rec_cnt=0;this.ary_of_objs=[];this.html="";this.init()}f.prototype={re_serialize:function(g){var h="";c.each(g.split("&"),function(j,i){c.each(i.split("="),function(l,k){if(c('input[name="'+k+'"]')&&c('input[name="'+k+'"]').attr("key")){h+=k+"="+c('input[name="'+k+'"]').attr("key")+"&"}else{h+=k+"="+c('input[name="'+k+'"]').val()+"&"}return false})});return h.slice(0,-1)},build_html:function(j){var i=1,h=1,g="<table class=CrEaTeDtAbLeStYlE cellpadding=4px >";j.build_array_of_objs(j);if(!(j.options.Data instanceof Array)||j.options.Data[0] instanceof Object){if(j.options.Sort===true){this.ary_of_objs.sort(function(l,k){return((l.val)>(k.val)?1:((k.val)>(l.val))?-1:0)})}if(j.options.UseValueForKey===true){c.each(this.ary_of_objs,function(m,l){l.val=l.ky})}if(j.options.ColumnCount===1){c.each(this.ary_of_objs,function(m,l){g+=((h%2===0)?"<tr class=even><td class=dflt key='"+l.ky+"'>"+l.val+"</td></tr>":"<tr class=odd><td class=dflt key='"+l.ky+"'>"+l.val+"</td></tr>");h+=1})}else{g+="<tr class=odd>";c.each(this.ary_of_objs,function(m,l){i+=1;g+="<td class=dflt key='"+l.ky+"'>"+l.val+"</td>";if(i>1&&((i-1)%j.options.ColumnCount)===0){if(h*j.options.ColumnCount<j.total_rec_cnt){h+=1;g+="</tr>";g+=((h%2===0)?"<tr class=even>":"<tr class=odd>")}i=1}})}}else{if(j.options.ColumnCount===1){c.each(j.options.Data,function(k,l){if(j.options.UseValueForKey===true){g+=((h%2===0)?"<tr class=even><td class=dflt key='"+l+"'>"+l+"</td></tr>":"<tr class=odd><td class=dflt key="+l+">"+l+"</td></tr>")}else{g+=((h%2===0)?"<tr class=even><td class=dflt key='"+k+"'>"+l+"</td></tr>":"<tr class=odd><td class=dflt key="+k+">"+l+"</td></tr>")}h+=1})}else{g+="<tr class=odd>";c.each(j.options.Data,function(k,l){i+=1;if(j.options.UseValueForKey===true){g+="<td class=dflt key='"+l+"'>"+l+"</td>"}else{g+="<td class=dflt key='"+k+"'>"+l+"</td>"}if(k&&(k+1)%j.options.ColumnCount===0){if(h*j.options.ColumnCount<j.total_rec_cnt){h+=1;g+="</tr>";g+=((h%2===0)?"<tr class=even>":"<tr class=odd>")}i=1}})}}if(i>1){for(pad=i;pad<=j.options.ColumnCount;pad+=1){g+="<td class=dflt key=''>&nbsp;</td>"}}if(j.options.ColumnCount>1){g+="</tr>"}g+="</table>";if(j.options.MenuOptionsType==="Navigate"){j.html=g.replace(/ key='.*?>/ig,">")}else{j.html=g}},add_clear_btn:function(g){if(g.options.ClearBtn&&g.options.MenuOptionsType==="Select"){var h="<div class=clear_btn onclick=\"$(this).prev('input').val('');$(this).prev('input').prop('key','');\"></div>";c(this.element).after(h);c("div.clear_btn").on("mouseenter mouseleave",function(){c(this).toggleClass("ClearButtonMO")})}},build_array_of_objs:function(g){c.each(g.options.Data,function(h,i){if(!(g.options.Data instanceof Array)){g.ary_of_objs.push({ky:h,val:i})}else{if(g.options.Data[0] instanceof Object){g.ary_of_objs.push({ky:i.id,val:i.value})}}g.total_rec_cnt+=1});if(g.options.MenuOptionsType==="Navigate"){g.ary_of_objs=c.map(g.ary_of_objs,function(i,h){return{ky:i.val,val:i.ky}})}},init:function(){var h=this,g="",i;h.add_clear_btn(h);if(h.options.SelectOnly){c(this.element).prop("readonly",true)}if(h.options.PlaceHolder!==""){c(this.element).prop("placeholder",h.options.PlaceHolder)}if(h.options.Data.toString()!==""){h.build_html(h)}c(this.element).on("mouseenter",function(k){c("span#"+h.options.ID).remove();c("<span id="+h.options.ID+">"+h.html+"</span>").appendTo("body").hide(1).position({of:this,my:"left top",at:"right bottom",collision:"flipfit"});c("span#"+h.options.ID+" tbody td").on("mouseenter",function(l){this.className=this.className.replace(/$/," mo")});c("span#"+h.options.ID+" tbody td").on("mouseleave",function(l){this.className=this.className.replace(/ mo/,"")});c("span#"+h.options.ID+" tbody td").on("click",function(){if(h.options.MenuOptionsType==="Select"){c(h.element).val(c.trim(c(this).text()));c(h.element).attr("key",c(this).attr("key"))}else{g=c(this).text();i=c.grep(h.ary_of_objs,function(l){return l.val===g});if(i&&i.length>0){if(c.isFunction(i[0].ky)){i[0].ky.call()}else{b.open(i[0].ky)}}}c("span#"+h.options.ID).remove()});c("span#"+h.options.ID).on("mouseleave",function(l){c("span#"+h.options.ID).remove()});var j=(parseInt(c("span#"+h.options.ID+" > table").css("width"),10)>c(this).width())?parseInt(c("span#"+h.options.ID+" > table").css("width"),10)+3:c(this).width();if(h.options.Width!==""){j=(parseInt(h.options.Width))}c("span#"+h.options.ID+", span#"+h.options.ID+" > table").css({width:j,zIndex:9999});c("span#"+h.options.ID).stop(true,false).show(0).position({my:"left top",at:"left bottom",of:this,})});c(this.element).on("mouseleave",function(l){var j=c("span#"+h.options.ID).position().top-3;var n=j+c("span#"+h.options.ID).height()+3;var k=c("span#"+h.options.ID).position().left;var m=k+c("span#"+h.options.ID).width();if(!(l.pageX>=k&&l.pageX<=m&&l.pageY>=j&&l.pageY<=n)){c("span#"+h.options.ID).remove()}})}};c.fn.menuoptions=function(g){if(g.Utility!==""&&c.isFunction(f.prototype[g.Utility])){return f.prototype[g.Utility].call(this,g.data)}else{return this.each(function(){if(!c.data(this,"plugin_menuoptions")){c.data(this,"plugin_menuoptions",new f(this,g))}})}}})(jQuery,window,document);