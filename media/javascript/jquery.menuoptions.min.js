(function(c,b,a,e){var d={ClearBtn:false,SelectOnly:false,ID:"UnIqDrOpDoWnSeLeCt",Data:"",ColumnCount:1,UseValueForKey:false,PlaceHolder:"",Width:"",ShowAt:"bottom",Sort:true,TriggerEvent:"",MenuOptionsType:"Select"};function f(h,g){this.element=h;this.options=c.extend({},d,g);this._defaults=d;this.total_rec_cnt=0;this.menu_start_loc={};this.menu_box={top:0,bottom:0,left:0,right:0,overlap:3};this.width_adj={width_menu:0,width_adjustment:0,width_after_adj:0};this.original_width=0;this.ary_of_objs=[];this.html="";this.init()}f.prototype={re_serialize:function(g){var h="";c.each(g.split("&"),function(j,i){c.each(i.split("="),function(l,k){if(c('input[name="'+k+'"]')&&c('input[name="'+k+'"]').attr("key")){h+=k+"="+c('input[name="'+k+'"]').attr("key")+"&"}else{h+=k+"="+c('input[name="'+k+'"]').val()+"&"}return false})});return h.slice(0,-1)},detect_destroyed_input:function(g){if(g.options.MenuOptionsType==="Select"){c(this.element).bind("remove",function(h){c("span#"+g.options.ID).remove()})}},build_html:function(j){var i=1,h=1,g="<table class=CrEaTeDtAbLeStYlE cellpadding=4px >";j.build_array_of_objs(j);if(!(j.options.Data instanceof Array)||j.options.Data[0] instanceof Object){if(j.options.Sort===true){this.ary_of_objs.sort(function(l,k){return((l.val)>(k.val)?1:((k.val)>(l.val))?-1:0)})}if(j.options.UseValueForKey===true){c.each(this.ary_of_objs,function(m,l){l.val=l.ky})}if(j.options.ColumnCount===1){c.each(this.ary_of_objs,function(m,l){g+=((h%2===0)?"<tr class=even><td class=dflt key='"+l.ky+"'>"+l.val+"</td></tr>":"<tr class=odd><td class=dflt key='"+l.ky+"'>"+l.val+"</td></tr>");h+=1})}else{g+="<tr class=odd>";c.each(this.ary_of_objs,function(m,l){i+=1;g+="<td class=dflt key='"+l.ky+"'>"+l.val+"</td>";if(i>1&&((i-1)%j.options.ColumnCount)===0){if(h*j.options.ColumnCount<j.total_rec_cnt){h+=1;g+="</tr>";g+=((h%2===0)?"<tr class=even>":"<tr class=odd>")}i=1}})}}else{if(j.options.ColumnCount===1){c.each(j.options.Data,function(k,l){if(j.options.UseValueForKey===true){g+=((h%2===0)?"<tr class=even><td class=dflt key='"+l+"'>"+l+"</td></tr>":"<tr class=odd><td class=dflt key="+l+">"+l+"</td></tr>")}else{g+=((h%2===0)?"<tr class=even><td class=dflt key='"+k+"'>"+l+"</td></tr>":"<tr class=odd><td class=dflt key="+k+">"+l+"</td></tr>")}h+=1})}else{g+="<tr class=odd>";c.each(j.options.Data,function(k,l){i+=1;if(j.options.UseValueForKey===true){g+="<td class=dflt key='"+l+"'>"+l+"</td>"}else{g+="<td class=dflt key='"+k+"'>"+l+"</td>"}if(k&&(k+1)%j.options.ColumnCount===0){if(h*j.options.ColumnCount<j.total_rec_cnt){h+=1;g+="</tr>";g+=((h%2===0)?"<tr class=even>":"<tr class=odd>")}i=1}})}}if(i>1){for(pad=i;pad<=j.options.ColumnCount;pad+=1){g+="<td class=dflt key=''>&nbsp;</td>"}}if(j.options.ColumnCount>1){g+="</tr>"}g+="</table>";if(j.options.MenuOptionsType==="Navigate"){j.html=g.replace(/ key='.*?>/ig,">")}else{j.html=g}},add_clear_btn:function(g){if(g.options.ClearBtn&&g.options.MenuOptionsType==="Select"){var h="<div class=clear_btn onclick=\"$(this).siblings('input').val('');$(this).siblings('input').prop('key','');$(this).siblings('input').mouseover()\"></div>";c(this.element).after(h);c("div.clear_btn").on("mouseenter mouseleave",function(){c(this).toggleClass("ClearButtonMO")})}},build_array_of_objs:function(g){c.each(g.options.Data,function(h,i){if(!(g.options.Data instanceof Array)){g.ary_of_objs.push({ky:h,val:i})}else{if(g.options.Data[0] instanceof Object){g.ary_of_objs.push({ky:i.id,val:i.value})}}g.total_rec_cnt+=1});if(g.options.MenuOptionsType==="Navigate"){g.ary_of_objs=c.map(g.ary_of_objs,function(i,h){return{ky:i.val,val:i.ky}})}},set_options:function(g){if(g.options.ShowAt.match(/^ *bottom *$/i)){g.options.ShowAt="left bottom"}else{if(g.options.ShowAt.match(/^ *right *$/i)){g.options.ShowAt="right top"}}if(g.options.SelectOnly){c(this.element).prop("readonly",true)}if(g.options.PlaceHolder!==""){c(this.element).prop("placeholder",g.options.PlaceHolder)}if(g.options.Data.toString()!==""){g.build_html(g)}},init:function(){var h=this,g="",i;h.set_options(h);h.add_clear_btn(h);h.detect_destroyed_input(h);c(this.element).on("mouseenter",function(j){c("span#"+h.options.ID).remove();c("<span id="+h.options.ID+">"+h.html+"</span>").appendTo("body").hide(1).position({of:this,my:"left top",at:h.options.ShowAt,collision:"flipfit"});c("span#"+h.options.ID+" tbody td").on("mouseenter",function(k){this.className=this.className.replace(/$/," mo")});c("span#"+h.options.ID+" tbody td").on("mouseleave",function(k){this.className=this.className.replace(/ mo/,"")});c("span#"+h.options.ID+" tbody td").on("click",function(){if(h.options.MenuOptionsType==="Select"){c(h.element).val(c.trim(c(this).text()));if(h.options.TriggerEvent.length){c(h.element).triggerHandler(h.options.TriggerEvent)}c(h.element).attr("key",c(this).attr("key"))}else{g=c(this).html().replace(/^<.*>/,"");i=c.grep(h.ary_of_objs,function(k){return g===k.val.replace(/^<.*>/,"")});if(i&&i.length>0){if(c.isFunction(i[0].ky)){i[0].ky.call()}else{b.open(i[0].ky)}}}c("span#"+h.options.ID).remove()});c("span#"+h.options.ID).on("mouseleave",function(k){c("span#"+h.options.ID).remove()});c("span#"+h.options.ID+", span#"+h.options.ID+" > table").css({zIndex:9999});h.menu_start_loc=c("span#"+h.options.ID).offset();h.width_adj.width_menu=parseInt(c("span#"+h.options.ID+" > table").css("width"),10);h.width_adj.width_after_adj=(parseInt(c("span#"+h.options.ID+" > table").css("width"),10)>c(this).width())?parseInt(c("span#"+h.options.ID+" > table").css("width"),10):c(this).width();if(h.options.Width!==""){h.width_adj.width_after_adj=(parseInt(h.options.Width))}c("span#"+h.options.ID+", span#"+h.options.ID+" > table").css({width:h.width_adj.width_after_adj});c("span#"+h.options.ID).stop(true,false).show();if(h.menu_start_loc.left!==c("span#"+h.options.ID).offset().left||h.menu_start_loc.top!==c("span#"+h.options.ID).offset().top){if(c("span#"+h.options.ID)&&c("span#"+h.options.ID)[0]){h.width_adj.width_adjustment=parseInt(c("span#"+h.options.ID)[0].style.left)+((h.width_adj.width_after_adj-h.width_adj.width_menu)/2);c("span#"+h.options.ID).css({left:h.width_adj.width_adjustment})}}});c(this.element).on("mouseleave",function(j){h.menu_box.top=c("span#"+h.options.ID).position().top-h.menu_box.overlap;h.menu_box.bottom=h.menu_box.top+c("span#"+h.options.ID).height()+h.menu_box.overlap;h.menu_box.left=c("span#"+h.options.ID).position().left-h.menu_box.overlap;h.menu_box.right=h.menu_box.left+c("span#"+h.options.ID).width();if(!(j.pageX>=h.menu_box.left&&j.pageX<=h.menu_box.right&&j.pageY>=h.menu_box.top&&j.pageY<=h.menu_box.bottom)){c("span#"+h.options.ID).remove()}})}};c.fn.menuoptions=function(g){if(g.Utility!==""&&c.isFunction(f.prototype[g.Utility])){return f.prototype[g.Utility].call(this,g.data)}else{return this.each(function(){if(!c.data(this,"plugin_menuoptions")){c.data(this,"plugin_menuoptions",new f(this,g))}})}}})(jQuery,window,document);